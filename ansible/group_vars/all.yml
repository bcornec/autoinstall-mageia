---
# Stable Mageia version to use for deployment
MGAMIRROR: rsync://duvel.mageia.org/mageia/distrib
MGAKSDIR: /var/www/html/ks
MGALDIR: /var/www/html/distrib
MGATFTPDIR: /var/lib/tftpboot
# Network
MGADOMAIN: mageia.org
MGAIDOMAIN: i.mageia.org
MGADPLOYIP: 192.168.26.156
MGAGW: 212.85.158.145
# Usefull ? MGAGW6:
MGADNS1: 212.85.158.151
MGADNS2: 163.172.148.228
MGADNS3: 1.1.1.1
# linux1 - temporary
MGAADMINPWD: $2a$08$37k9US2q3ST4eLFeR/.ype6SaYD3KgRL5ODOPjH9yStTKVW1zTDm.
# Name of the user during auto_inst install
MGAADMININS: fwadmin
# Local scripts
MGALOCAL: /usr/local
#
# In case we have a LDAP server to use, use the following values:
#
LDAPSRVNAME: ldap.mageia.org
LDAPDMN: mageia.org
LDAPPWD: MotDePasseLDAPCompliqu√©Aussi123!!!##
LDAPPORT: "389"

#
# MGA services per node type
#
nodes:
  # Common content for all nodes
  - name: system
    mgaver: 9
    mgaarch: x86_64
    nodenames:
      - name: void
        mac: 00:00:00:00:00:00
    ports:
      - tcp 22,53,123
      - udp 53,123
      - icmp 8
    svcs:
      - network
      - crond
      - fail2ban
      - ntpd
      - postfix
      - shorewall
      - sshd
    pkgs:
      # This list should have been auto_installed, but check for sure
      - ansible
      - git
      - kernel-server-latest
      - openssh-server
      - openssh-clients
      - python3
      - shorewall
      - sudo
      - urpmi
      - vim-minimal
      - wget
      - xz
      - bash-completion
      - bind-utils
      - bzip2
      - cronie
      - curl
      - diffutils
      - drakxtools-curses
      - fail2ban
      - inxi
      - ldetect
      - lm_sensors
      - lsof
      - locales-fr
      - man
      - msec
      - mutt
      - netcat-traditional
      - numlock
      - ntpsec
      - openldap-clients
      - pciutils
      - perl-Data-Dumper
      - perl-Proc-ProcessTable
      - plocate
      - postfix
      - procmail
      - puppet
      - rsync
      - sos
      - strace
      - usbutils
      - vim-common
      - vim-enhanced
      - vlock
      - wget
      - xymon-client

  - name: build
    nodenames:
      - name: garcimore
        # interface for deployment
        dif:
          name: eno1
          mac: 80:30:e0:24:fb:c4
          ip: 192.168.26.154/24
        # For internal comm
        iif:
          name: bond1
          mac:
            # eno1
            - 80:30:e0:24:fb:c4
            # eno2
            - 80:30:e0:24:fb:c5
          ip: 192.168.26.154/24
        # IELO /28
        pubif:
          name: bond0
          mac:
            # eno5
            - 14:02:ec:96:9b:b0
            # eno6
            - 14:02:ec:96:9b:b1
          ip: 212.85.158.154/28
          ipv6: 2a02:2178:2:7::a/64
        ilo:
          name: ilo
          mac: 80:30:e0:38:90:42
          ip: 192.168.25.154
      - name: houdini
        # for deployment
        dif:
          name: eno1
          mac: 94:40:c9:3d:47:28
          ip: 192.168.26.155/24
        # for internal comm
        iif:
          name: bond1
          mac:
            # eno1
            - 94:40:c9:3d:47:28
            # eno2
            - 94:40:c9:3d:47:29
          ip: 192.168.26.155/24
        # IELO /28
        pubif:
          name: bond0
          mac:
            # eno5
            - 14:02:ec:81:18:80
            # eno6
            - 14:02:ec:81:18:81
          ip: 212.85.158.155/28
          ipv6: 2a02:2178:2:7::b/64
        ilo:
          name: ilo
          mac: B4:7A:F1:4F:A0:04
          ip: 192.168.25.155
    mgaver: 9
    mgaarch: x86_64
    ports:
      - tcp 22
    pkgs:
      - iurt
    svcs:
      - sshd

  - name: dploy
    nodenames:
      - name: mandrake
        # for deployment
        dif:
          name: eno2
          mac: 30:8d:99:b2:f9:24
          ip: 192.168.26.156/24
        # for internal comm
        iif:
          name: eno2
          mac:
            - 30:8d:99:b2:f9:24
          ip: 192.168.26.156/24
        # IELO /28
        pubif:
          name: eno1
          mac:
            - xx:8d:99:b2:f9:24
          ip: 212.85.158.156/28
          ipv6: 2a02:2178:2:7::c/64
        ilo:
          name: ilo
          mac: 30:8d:99:b2:f9:21
          ip: 192.168.25.156
    mgaver: 9
    mgaarch: x86_64
    ports:
      - tcp 80
      - udp 68,69
    svcs:
      - httpd
      - dhcpd
      - tftp
    pkgs:
      - apache
      - dhcp-server
      - pxelinux
      - tftp-server
      - python3-netaddr

  - name: repo
    nodenames:
      - name: melies
        # for deployment
        dif:
          name: eno1
          mac: 14:02:ec:96:9c:88
          ip: 192.168.26.158/24
        iif:
          name: bond1
          mac:
            - b8:83:03:51:ec:c2
            - b8:83:03:51:ec:c3
          ip: 192.168.26.158/24
        # IELO /28
        pubif:
          name: bond0
          mac:
            - 14:02:ec:96:9c:88
            - 14:02:ec:96:9c:89
          ip: 212.85.158.158/28
          ipv6: 2a02:2178:2:7::e/64
        ilo:
          name: ilo
          mac: B8:83:03:51:EC:C0 
          ip: 192.168.25.158
    mgaver: 9
    mgaarch: x86_64
    ports:
      - tcp 80
    svcs:
      - rsynd
    pkgs:
      - rpmtools

  - name: web
    nodenames:
      - name: webb
        # for deployment
        dif:
          name: eno1
          mac: 5c:b9:01:8d:b4:f4
          ip: 192.168.26.157/24
        iif:
          name: bond1
          mac:
            - 5c:b9:01:8d:b4:f4
            - 5c:b9:01:8d:b4:f5
          ip: 192.168.26.157/24
        # IELO /28
        pubif:
          name: bond0
          mac:
            - b8:83:03:51:eb:1e
            - b8:83:03:51:eb:1f
          ip: 212.85.158.157/28
          ipv6: 2a02:2178:2:7::d/64
        ilo:
          name: ilo
          mac: b8:83:03:51:eb:1c
          ip: 192.168.25.157
    mgaver: 9
    mgaarch: x86_64
    ports:
      - tcp 80
    svcs:
      - httpd
    pkgs:
      - apache
